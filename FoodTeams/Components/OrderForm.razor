@using FoodTeams.Entities
@using FoodTeams.Services
@inject OrderService service
@inject NavigationManager UriHelper


<div class="input-group mb-3">
	<div class="input-group-prepend">
		<span class="input-group-text" id="inputGroup-sizing-default">Restaurant name</span>
	</div>
	<input placeholder="Restaurant Name" @bind="RestaurantName" type="text" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default">
</div>

<div class="input-group mb-3">
	<div class="input-group-prepend">
		<span class="input-group-text" id="inputGroup-sizing-default">MenuLink</span>
	</div>
	<input placeholder="MenuLink" @bind="MenuLink" type="text" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default">
</div>

<div class="input-group mb-3">
	<div class="input-group-prepend">
		<span class="input-group-text" id="inputGroup-sizing-default">Minimal price</span>
	</div>
	<input placeholder="Minimal Price" @bind="MinPrice" type="number" min="0" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default">
</div>

<div class="input-group mb-3">
	<div class="input-group-prepend">
		<span class="input-group-text" id="inputGroup-sizing-default">DeliveryPrice</span>
	</div>
	<input placeholder="DeliveryPrice" @bind="DeliveryPrice" type="number" min="0" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default">
</div>

<div class="input-group mb-3">
	<div class="input-group-prepend">
		<span class="input-group-text" id="inputGroup-sizing-default">FreeDeliveryPrice</span>
	</div>
	<input placeholder="FreeDeliveryPrice" @bind="FreeDeliveryPrice" type="number" min="0" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default">
</div>

<div class="input-group mb-3">
	<div class="input-group-prepend">
		<span class="input-group-text" id="inputGroup-sizing-default">BLIKNumber</span>
	</div>
	<input placeholder="BLIKnumber" @bind="BLIKNumber" type="number" min="0" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default">
</div>

<button style="display: block;margin: 0 auto;"
		class="btn btn-success" @onclick="()=>CreateNewOrder(neworder)">
	Create Order
</button>

@code {
	public string RestaurantName { get; set; }
	public string MenuLink { get; set; }
	public decimal MinPrice { get; set; }
	public decimal DeliveryPrice { get; set; }
	public decimal FreeDeliveryPrice { get; set; }
	public long BLIKNumber { get; set; }

	public void CreateNewOrder(Order order)
	{
		GetOrder(order);
		service.CreateOrder(order);
		UriHelper.NavigateTo("/CreateDish");
	}

	public void GetOrder(Order order)
	{
		order.RestaurantName = RestaurantName;
		order.MenuLink = MenuLink;
		order.MinPrice = MinPrice;
		order.DeliveryPrice = DeliveryPrice;
		order.FreeDeliveryPrice = FreeDeliveryPrice;
		order.BLIKNumber = BLIKNumber;
		order.CreateDate = DateTime.Now;
		order.IsActive = true;
	}

	Order neworder = new Order();
}
